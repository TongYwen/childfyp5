{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h3>Notifications</h3>
    <hr>

    {% if notifications %}
        <ul class="list-group">
            {% for n in notifications %}
                <li class="list-group-item d-flex justify-content-between align-items-start
                    {% if not n.is_read %}fw-bold{% endif %}">
                    <div class="ms-2 me-auto">
                        <div class="d-flex justify-content-between">
                            <span>{{ n.title }}</span>
                            <small class="text-muted">
                                {{ n.created_at.strftime("%Y-%m-%d %H:%M") if n.created_at }}
                            </small>
                        </div>
                        <div class="small mt-1">
                            {{ n.message }}
                        </div>
                    </div>

                    <a href="{{ url_for('open_notification', notif_id=n.id) }}"
                       class="btn btn-sm btn-outline-primary ms-3">
                        View
                    </a>
                    <form method="POST"
                        action="{{ url_for('delete_notification', notif_id=n.id) }}"
                        onsubmit="return confirm('Delete this notification?');">
                        <button type="submit" class="btn btn-sm btn-outline-danger">
                            Delete
                        </button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No notifications yet.</p>
    {% endif %}
</div>
{% endblock %}
